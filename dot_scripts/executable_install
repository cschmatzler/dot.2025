#!/usr/bin/env bash

set -e

echo "ğŸ“¦ Installing packages..."

# Brew packages
if command -v brew &>/dev/null; then
  echo "ğŸº Installing brew packages..."
  brew update
  brew upgrade
  
{{- if .personal | default false }}
  cat $HOME/.config/brew/Brewfile.common $HOME/.config/brew/Brewfile.personal | brew bundle --file=-
{{ else }}
  cat $HOME/.config/brew/Brewfile.common $HOME/.config/brew/Brewfile.work | brew bundle --file=-
{{- end }}

  brew upgrade --fetch-HEAD
  echo "âœ… Brew packages installed"
else
  echo "âš ï¸  brew not found, skipping..."
fi

# Mise tools
if command -v mise &>/dev/null; then
  echo "ğŸ”§ Installing mise tools..."
  mise install
  echo "âœ… Mise tools installed"
else
  echo "âš ï¸  mise not found, skipping..."
fi

echo "âœ… All packages installed!"